cscope 15 /cygdrive/e/Program/python/PythonFinance -q 0000000579 0000046278
	@E:\Program\python\PythonFinance\.ropeproject\config.py

1 #Thê ``
c⁄fig
.
py
``

4 
def
 
	$£t_¥efs
(
¥efs
):

7 #S≥cify 
which
 
fûes
 
™d
 
fﬁdîs
 
to
 
ign‹e
 
ö
 
the
 
¥oje˘
.

8 #Ch™ge†
to
 
ign‹ed
 
ªsour˚s
 
¨e
 
nŸ
 
added
Åÿ
the
 
hi°‹y
 
™d


9 #VCSs. 
Also
 
they
 
¨e
 
nŸ
 
ªtu∫ed
 
ö
 `
Proje˘
.
	`gë_fûes
()`.

10 #NŸê
th©
 ``?`` 
™d
 ``*`` 
m©ch
 
Æl
 
ch¨a˘îs
 
but
 
¶ashes
.

11 #'*.
pyc
': m©che†'
ã°
.pyc'ánd '
pkg
/test.pyc'

12 #'
mod
*.
pyc
': m©che†'
ã°
/
mod1
.pyc' butÇot 'mod/1.pyc'

13 #'.
svn
': m©che†'
pkg
/.svn'ándáll of its children

14 #'
buûd


	@E:\Program\python\PythonFinance\BackTrader\.ropeproject\config.py

1 #Thê ``
c⁄fig
.
py
``

4 
def
 
	$£t_¥efs
(
¥efs
):

7 #S≥cify 
which
 
fûes
 
™d
 
fﬁdîs
 
to
 
ign‹e
 
ö
 
the
 
¥oje˘
.

8 #Ch™ge†
to
 
ign‹ed
 
ªsour˚s
 
¨e
 
nŸ
 
added
Åÿ
the
 
hi°‹y
 
™d


9 #VCSs. 
Also
 
they
 
¨e
 
nŸ
 
ªtu∫ed
 
ö
 `
Proje˘
.
	`gë_fûes
()`.

10 #NŸê
th©
 ``?`` 
™d
 ``*`` 
m©ch
 
Æl
 
ch¨a˘îs
 
but
 
¶ashes
.

11 #'*.
pyc
': m©che†'
ã°
.pyc'ánd '
pkg
/test.pyc'

12 #'
mod
*.
pyc
': m©che†'
ã°
/
mod1
.pyc' butÇot 'mod/1.pyc'

13 #'.
svn
': m©che†'
pkg
/.svn'ándáll of its children

14 #'
buûd


	@E:\Program\python\PythonFinance\BackTrader\BackTrader.py

	@E:\Program\python\PythonFinance\BackTrader\Strategy_KAMA_1.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-09-30 23:20:09

6 #Fûê
Name
: 
ßm∂e1
.
py


8 
‰om
 
__futuª__
 
	$imp‹t
 (
absﬁuã_imp‹t
, 
divisi⁄
, 
¥öt_fun˘i⁄
,

9 
unicode_lôîÆs
)

11 
imp‹t
 
d©ëime
 #F‹ d©ëimê
obje˘s


12 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


13 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
	`«me
 (
ö
 
¨gv
[0])

14 #imp‹à
∑ndas
 
as
 
pd


15 #‰om 
WödPy
 
imp‹t
 
w


16 #Imp‹à
the
 
backåadî
 
∂©f‹m


17 
imp‹t
 
backåadî
 
as
 
bt


18 
imp‹t
 
sys


19 
sys
.
∑th
.
	`≠≥nd
("../FinanceDataSource")

20 
imp‹t
 
Fö™˚D©aSour˚


23 #Cª©ê
a
 
Så©ey


25 
˛ass
 
	$Så©egy_KAMA
(
bt
.
Så©egy
):

27 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
):

29 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

30 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

32 
def
 
	$__öô__
(
£lf
):

33 #Kì∞
a
 
ª„ªn˚
 
to
 
the
 "˛o£" 
löe
 
ö
Åhê
d©a
[0] 
d©a£rõs


34 
£lf
.
d©a˛o£
 = sñf.
d©as
[0].
˛o£


36 
£lf
.
kama
 = 
bt
.
èlib
.
	$KAMA
(
£lf
.
d©a
)

37 #Tÿ
kìp
 
åack
 
of
 
≥ndög
 
‹dîs


38 
£lf
.
‹dî
 = 
N⁄e


40 
def
 
	$nŸify
(
£lf
, 
‹dî
):

41 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

42 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

45 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


46 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


47 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

48 
‹dî
.
	$isbuy
():

49 
£lf
.
	`log
('BUY EXECUTED, %d, %.2f' %

50 (
‹dî
.
execuãd
.
size
, ordî.execuãd.
¥i˚
))

51 
ñif
 
‹dî
.
	$is£Œ
():

52 
£lf
.
	`log
('SELL EXECUTED, %d, %.2f' %

53 (
‹dî
.
execuãd
.
size
, ordî.execuãd.
¥i˚
))

55 
£lf
.
b¨_execuãd
 = 
	$Àn
(
£lf
)

57 #Wrôê
down
: 
no
 
≥ndög
 
‹dî


58 
£lf
.
‹dî
 = 
N⁄e


60 
def
 
	$√xt
(
£lf
):

61 #Sim∂y 
log
 
the
 
˛osög
 
¥i˚
 
of
Åhê
£rõs
 
‰om
Åhê
ª„ªn˚


62 #£lf.
	`log
('Clo£, %.2f' % 
£lf
.
d©a˛o£
[0])

64 #Check 
™
 
‹dî
 
is
 
≥ndög
 ... 
yes
, 
we
 
ˇ¬Ÿ
 
£nd
 
a
 2
nd
 
⁄e


65 
£lf
.
‹dî
:

69 
£lf
.
kama
[0] > sñf.kama[-1] 
™d
 self.kama[-2] > self.kama[-1]:

70 
£lf
.
‹dî
 = sñf.
	$buy
()

71 
∑ss


73 
ñif
 
£lf
.
kama
[0] < sñf.kama[-1] 
™d
 self.kama[-2] < self.kama[-1]:

75 
£lf
.
‹dî
 = sñf.
	$£Œ
()

76 
∑ss


78 #Check 
we
 
¨e
 
ö
 
the
 
m¨kë


79 
nŸ
 
£lf
.
posôi⁄
:

80 
∑ss


84 
∑ss


87 
__«me__
 == '__main__':

88 #Cª©ê
a
 
˚ªbro
 
ítôy


89 
˚ªbro
 = 
bt
.
	$Cîebro
()

91 #Add 
a
 
°øãgy


92 
˚ªbro
.
	$add°øãgy
(
Så©egy_KAMA
)

94 #Cª©ê
a
 
D©a
 
Fìd


95 #Êú¨Âú∞Êï∞ÊçÆÔºåÁ¨îËÄÖÁî®
Wöd
Ëé∑ÂèñÁöÑ‰∏úÈ£éÊ±ΩËΩ¶Êï∞ÊçÆ‰ª•
csv
ÂΩ¢ÂºèÂ≠òÂÇ®Âú®Êú¨Âú∞„ÄÇ

96 #∑ø£_d©e†
True
ÊòØ‰∏∫‰∫ÜËØªÂèñ
csv
‰∏∫
d©a‰ame
ÁöÑÊó∂ÂÄôËÉΩÂ§üËá™Âä®ËØÜÂà´
d©ëime
Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå
big
‰Ωú‰∏∫
ödex


97 #Ê≥®ÊÑèÔºåËøôÈáåÊúÄÂêéÁöÑ
∑ndas
Ë¶ÅÁ¨¶Âêà
backåadî
ÁöÑË¶ÅÊ±ÇÁöÑÊ†ºÂºè

98 
d©a‰ame
 = 
Fö™˚D©aSour˚
.
	$gë_d©a
(

99 
Fö™˚D©aSour˚
.
°r_t⁄ghuashun
, Fö™˚D©aSour˚.
t⁄ghuashun_AGTD
)

100 
d©a‰ame
['openinterest'] = 0

101 
d©a
 = 
bt
.
„eds
.
	$P™dasD©a
(
d©™ame
=
d©a‰ame
)

102 #Add 
the
 
D©a
 
Fìd
 
to
 
Cîebro


103 
˚ªbro
.
	$addd©a
(
d©a
)

105 
˚ªbro
.
	$addsizî
(
bt
.
sizîs
.
Pî˚¡Sizî
, 
≥r˚¡s
=10)

107 #Së 
our
 
desúed
 
ˇsh
 
°¨t


108 
˚ªbro
.
brokî
.
	$£tˇsh
(50000.0)

110 #Pröà
out
 
the
 
°¨tög
 
c⁄dôi⁄s


111 
	`¥öt
('Sèπög P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

113 #Ru¿
ovî
 
evîythög


114 
˚ªbro
.
	$run
()

116 #Pröà
out
 
the
 
föÆ
 
ªsu…


117 
	`¥öt
('FöÆ P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

118 #PlŸ 
the
 
ªsu…


119 
˚ªbro
.
	`∂Ÿ
()

	@E:\Program\python\PythonFinance\BackTrader\Strategy_KAMA_2.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-10-03 16:36:18

6 #Fûê
Name
: 
ßm∂e1
.
py


8 
‰om
 
__futuª__
 
	$imp‹t
 (
absﬁuã_imp‹t
, 
divisi⁄
, 
¥öt_fun˘i⁄
,

9 
unicode_lôîÆs
)

11 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


12 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


13 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
	`«me
 (
ö
 
¨gv
[0])

14 #imp‹à
∑ndas
 
as
 
pd


15 #‰om 
WödPy
 
imp‹t
 
w


16 #Imp‹à
the
 
backåadî
 
∂©f‹m


17 
imp‹t
 
backåadî
 
as
 
bt


18 
imp‹t
 
sys


19 
sys
.
∑th
.
	`≠≥nd
("../")

20 #‰om 
Fö™˚D©aMöög
 
imp‹t
 
öô_d©a


23 #Cª©ê
a
 
Så©ey


25 
˛ass
 
	$Så©egy_KAMA
(
bt
.
Så©egy
):

27 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
):

29 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

30 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

32 
def
 
	$__öô__
(
£lf
):

33 #Kì∞
a
 
ª„ªn˚
 
to
 
the
 "˛o£" 
löe
 
ö
Åhê
d©a
[0] 
d©a£rõs


34 
£lf
.
d©a˛o£
 = sñf.
d©as
[0].
˛o£


36 
£lf
.
kama
 = 
bt
.
èlib
.
	$KAMA
(
£lf
.
d©a
)

37 #Tÿ
kìp
 
åack
 
of
 
≥ndög
 
‹dîs


38 
£lf
.
‹dî
 = 
N⁄e


40 
def
 
	$nŸify
(
£lf
, 
‹dî
):

41 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

42 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

45 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


46 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


47 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

48 
‹dî
.
	$isbuy
():

49 
£lf
.
	`log
('BUY EXECUTED, %d, %.2f' % (
‹dî
.
execuãd
.
size
, ordî.execuãd.
¥i˚
))

50 
ñif
 
‹dî
.
	$is£Œ
():

51 
£lf
.
	`log
('SELL EXECUTED, %d, %.2f' % (
‹dî
.
execuãd
.
size
, ordî.execuãd.
¥i˚
))

53 
£lf
.
b¨_execuãd
 = 
	$Àn
(
£lf
)

55 #Wrôê
down
: 
no
 
≥ndög
 
‹dî


56 
£lf
.
‹dî
 = 
N⁄e


58 
def
 
	$√xt
(
£lf
):

59 #Sim∂y 
log
 
the
 
˛osög
 
¥i˚
 
of
Åhê
£rõs
 
‰om
Åhê
ª„ªn˚


60 #£lf.
	`log
('Clo£, %.2f' % 
£lf
.
d©a˛o£
[0])

62 #Check 
™
 
‹dî
 
is
 
≥ndög
 ... 
yes
, 
we
 
ˇ¬Ÿ
 
£nd
 
a
 2
nd
 
⁄e


63 
£lf
.
‹dî
:

66 
k
 = 
£lf
.
kama


67 
h
 = 
£lf
.
d©a_high


68 
l
 = 
£lf
.
d©a_low


69 
p_s
 = 
£lf
.
posôi⁄
.
size


73 
l
[0] > 
k
[0] 
™d
Ü[-1] > k[-1]ánd 
p_s
 <= 0:

74 
£lf
.
‹dî
 = sñf.
	$‹dî_èrgë_≥r˚¡
(
èrgë
=0.1)

75 
£lf
.
	$£Œ
(
¥i˚
=
£lf
.
kama
[0], 
size
=£lf.
‹dî
.size, 
execuãd
=
bt
.
Ordî
.
St›
, 
å™smô
=
FÆ£
, 
∑ª¡
=self.order)

76 
h
[0] < 
k
[0] 
™d
 h[-1] < k[-1]ánd 
p_s
 >= 0:

77 
£lf
.
‹dî
 = sñf.
	`‹dî_èrgë_≥r˚¡
(
èrgë
=-0.1)

78 
£lf
.
	`buy
(
¥i˚
=£lf.
kama
[0], 
size
=£lf.
‹dî
.size, 
execuãd
=
bt
.
Ordî
.
St›
, 
å™smô
=
FÆ£
, 
∑ª¡
=self.order)

81 
FöÆ
 
P‹tfﬁio
 
VÆue
: 101954.11

82 Â§èÊôÆÊØîÁéá: 
	`OrdîedDi˘
([('sharperatio', -0.3973477640025947)])

83 ÊúÄÂ§ßÂõûÊí§: 
	`AutoOrdîedDi˘
([('len', 1567), ('drawdown', 8.149751729860053), ('moneydown', 9046.253799999657), ('max', AutoOrderedDict([('len', 1567), ('drawdown', 8.22337095022286), ('moneydown', 9127.97139999966)]))])

84 Âπ¥ÂåñÊî∂ÁõäÔºö 
	`OrdîedDi˘
([('rtot', 0.019352591731643536), ('ravg', 8.713458681514424e-06), ('rnorm', 0.0021982041035608565), ('rnorm100', 0.21982041035608565)])

	@E:\Program\python\PythonFinance\BackTrader\Strategy_MACD_1.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-10-02 23:51:47

6 #Fûê
Name
: 
ßm∂e1
.
py


8 #‰om 
__futuª__
 
imp‹t
 (
absﬁuã_imp‹t
, 
divisi⁄
, 
¥öt_fun˘i⁄
,

11 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


12 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


13 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
«me
 (
ö
 
¨gv
[0])

14 #imp‹à
∑ndas
 
as
 
pd


15 #‰om 
WödPy
 
imp‹t
 
w


16 #Imp‹à
the
 
backåadî
 
∂©f‹m


17 
imp‹t
 
backåadî
 
as
 
bt


18 
imp‹t
 
sys


19 
	gsys
.
	g∑th
.
≠≥nd
("../FinanceDataSource")

20 
imp‹t
 
	gFö™˚D©aSour˚


22 #Cª©ê
a
 
Så©ey


23 #Ëøô‰∏™
MACD
Á≥ªÁªü

26 
˛ass
 
	$Så©egy_MACD
(
bt
.
Så©egy
):

28 
∑øms
 = (('fastperiod', 12), ('slowperiod', 26), ('signalperiod', 9))

30 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
):

32 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

33 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

35 
def
 
	$__öô__
(
£lf
):

37 
£lf
.
macdhi°o
 = 
bt
.
ödiˇt‹s
.
	$MACDHi°o
(
£lf
.
d©a
)

38 
£lf
.
‹dî
 = 
N⁄e


40 
def
 
	$nŸify
(
£lf
, 
‹dî
):

41 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

42 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

45 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


46 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


47 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

48 
‹dî
.
	$isbuy
():

49 
£lf
.
	`log
(

51 (
‹dî
.
execuãd
.
size
,

52 
‹dî
.
execuãd
.
¥i˚
,

53 
‹dî
.
execuãd
.
vÆue
,

54 
‹dî
.
execuãd
.
comm
))

56 
£lf
.
buy¥i˚
 = 
‹dî
.
execuãd
.
¥i˚


57 
£lf
.
buycomm
 = 
‹dî
.
execuãd
.
comm


58 
£lf
.
›size
 = 
‹dî
.
execuãd
.
size


60 
£lf
.
	`log
(

62 (
‹dî
.
execuãd
.
size
,

63 
‹dî
.
execuãd
.
¥i˚
,

64 
‹dî
.
execuãd
.
vÆue
,

65 
‹dî
.
execuãd
.
comm
))

67 
def
 
	$√xt
(
£lf
):

68 #Sim∂y 
log
 
the
 
˛osög
 
¥i˚
 
of
Åhê
£rõs
 
‰om
Åhê
ª„ªn˚


69 #£lf.
	`log
('Clo£, %.2f' % 
£lf
.
d©a˛o£
[0])

71 #Check 
™
 
‹dî
 
is
 
≥ndög
 ... 
yes
, 
we
 
ˇ¬Ÿ
 
£nd
 
a
 2
nd
 
⁄e


72 
£lf
.
‹dî
:

74 #ÂÖàÊ±ÇËøòÊúâÂ§öÂ∞ëÈí±Âêß, 
ˇsh
ÊòØ
gë_ˇsh
, Â¶ÇÊûúÊòØË¶ÅËµÑ‰∫ßÊòØ
	`gë_vÆue
()

75 
ˇsh
 = 
£lf
.
brokî
.
	$gë_vÆue
()

76 #vÆuê
£lf
.
brokî
.
	`gë_vÆue
()

78 
›í_¥i˚
 = 
£lf
.
d©a_›í
[0]

80 
size1
 = (
ˇsh
 / 
›í_¥i˚
 * 0.1)

81 #size2 = (
vÆue
/
›í_¥i˚
*0.25)

83 if(
£lf
.
macdhi°o
[0] > 0

84 
™d
 
£lf
.
macdhi°o
[-1] < 0):

85 
£lf
.
	$buy
(
size
=
size1
)

87 if(
£lf
.
macdhi°o
[0] < 0

88 
™d
 
£lf
.
macdhi°o
[-1] > 0):

89 
£lf
.
	$£Œ
(
size
=
size1
)

92 
__«me__
 == '__main__':

93 #Cª©ê
a
 
˚ªbro
 
ítôy


94 
˚ªbro
 = 
bt
.
	$Cîebro
()

96 #Add 
a
 
°øãgy


97 
˚ªbro
.
	$add°øãgy
(
Så©egy_MACD
)

101 
˚ªbro
.
brokî
.
	$£tcommissi⁄
(
commissi⁄
=0.0008, 
öãª°
=0.05475)

103 #Cª©ê
a
 
D©a
 
Fìd


104 #Êú¨Âú∞Êï∞ÊçÆÔºåÁ¨îËÄÖÁî®
Wöd
Ëé∑ÂèñÁöÑ‰∏úÈ£éÊ±ΩËΩ¶Êï∞ÊçÆ‰ª•
csv
ÂΩ¢ÂºèÂ≠òÂÇ®Âú®Êú¨Âú∞„ÄÇ

105 #∑ø£_d©e†
True
ÊòØ‰∏∫‰∫ÜËØªÂèñ
csv
‰∏∫
d©a‰ame
ÁöÑÊó∂ÂÄôËÉΩÂ§üËá™Âä®ËØÜÂà´
d©ëime
Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå
big
‰Ωú‰∏∫
ödex


106 #Ê≥®ÊÑèÔºåËøôÈáåÊúÄÂêéÁöÑ
∑ndas
Ë¶ÅÁ¨¶Âêà
backåadî
ÁöÑË¶ÅÊ±ÇÁöÑÊ†ºÂºè

107 
d©a‰ame
 = 
Fö™˚D©aSour˚
.
	$gë_d©a
(

108 
Fö™˚D©aSour˚
.
°r_t⁄ghuashun
, Fö™˚D©aSour˚.
t⁄ghuashun_AGTD
)

109 
d©a‰ame
['openinterest'] = 0

110 
d©a
 = 
bt
.
„eds
.
	$P™dasD©a
(
d©™ame
=
d©a‰ame
)

111 #Add 
the
 
D©a
 
Fìd
 
to
 
Cîebro


112 
˚ªbro
.
	$addd©a
(
d©a
)

115 #˚ªbro.
	`addsizî
(
bt
.
sizîs
.
Pî˚¡Sizî
, 
≥r˚¡s
=10)

118 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
Sh¨≥R©io
, 
_«me
='SharpeRatio')

119 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
DøwDown
, 
_«me
='DW')

121 #Së 
our
 
desúed
 
ˇsh
 
°¨t


122 
˚ªbro
.
brokî
.
	$£tˇsh
(50000.0)

124 #Pröà
out
 
the
 
°¨tög
 
c⁄dôi⁄s


125 
	`¥öt
('Sèπög P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

127 #Ru¿
ovî
 
evîythög


128 
ªsu…s
 = 
˚ªbro
.
	$run
()

130 #Pröà
out
 
the
 
föÆ
 
ªsu…


131 
	`¥öt
('FöÆ P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

132 #PlŸ 
the
 
ªsu…


133 #˚ªbro.
	`∂Ÿ
()

136 
°øt
 = 
ªsu…s
[0]

137 
	`¥öt
('Â§èÊôÆÊØîÁéá:', 
°øt
.
™Æyzîs
.
Sh¨≥R©io
.
	$gë_™Æysis
())

138 
	`¥öt
('ÊúÄÂ§ßÂõûÊí§:', 
°øt
.
™Æyzîs
.
DW
.
	`gë_™Æysis
())

	@E:\Program\python\PythonFinance\BackTrader\Strategy_MA_1.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-11-07 21:18:01

6 #Fûê
Name
: 
ßm∂e1
.
py


8 
‰om
 
__futuª__
 
	$imp‹t
 (
absﬁuã_imp‹t
, 
divisi⁄
, 
¥öt_fun˘i⁄
,

9 
unicode_lôîÆs
)

11 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


12 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


13 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
	`«me
 (
ö
 
¨gv
[0])

14 #imp‹à
∑ndas
 
as
 
pd


15 #‰om 
WödPy
 
imp‹t
 
w


16 #Imp‹à
the
 
backåadî
 
∂©f‹m


17 
imp‹t
 
backåadî
 
as
 
bt


18 
imp‹t
 
sys


19 
sys
.
∑th
.
	`≠≥nd
("../FinanceDataSource")

20 
imp‹t
 
Fö™˚D©aSour˚


23 #Cª©ê
a
 
Så©ey


26 #ÂΩì
MACD
Âá∫Áé∞Á™ÅÁ†¥ÁöÑÊó∂ÂÄôÔºå10%‰ªì‰Ωç„ÄÇ

27 
˛ass
 
	$Så©egy_MA
(
bt
.
Så©egy
):

29 
∑øms
 = (('ma1', 5), ('ma2', 10), ('ma3', 20))

31 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
):

33 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

34 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

36 
def
 
	$__öô__
(
£lf
):

38 
£lf
.
sma1
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma1
)

39 
£lf
.
sma2
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma2
)

40 
£lf
.
sma3
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma3
)

41 
£lf
.
‹dî
 = 
N⁄e


43 
def
 
	$nŸify
(
£lf
, 
‹dî
):

44 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

45 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

48 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


49 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


50 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

51 
‹dî
.
	$isbuy
():

52 
£lf
.
	`log
(

54 (
‹dî
.
execuãd
.
size
,

55 
‹dî
.
execuãd
.
¥i˚
,

56 
‹dî
.
execuãd
.
vÆue
,

57 
‹dî
.
execuãd
.
comm
))

59 
£lf
.
buy¥i˚
 = 
‹dî
.
execuãd
.
¥i˚


60 
£lf
.
buycomm
 = 
‹dî
.
execuãd
.
comm


61 
£lf
.
›size
 = 
‹dî
.
execuãd
.
size


63 
£lf
.
	`log
('SELL EXECUTED, %d, Price: %.2f, Cost: %.2f, Comm %.2f' %

64 (
‹dî
.
execuãd
.
size
,

65 
‹dî
.
execuãd
.
¥i˚
,

66 
‹dî
.
execuãd
.
vÆue
,

67 
‹dî
.
execuãd
.
comm
))

69 
def
 
	$√xt
(
£lf
):

70 #Sim∂y 
log
 
the
 
˛osög
 
¥i˚
 
of
Åhê
£rõs
 
‰om
Åhê
ª„ªn˚


71 #£lf.
	`log
('Clo£, %.2f' % 
£lf
.
d©a˛o£
[0])

73 #Check 
™
 
‹dî
 
is
 
≥ndög
 ... 
yes
, 
we
 
ˇ¬Ÿ
 
£nd
 
a
 2
nd
 
⁄e


74 
£lf
.
‹dî
:

76 #ÂÖàÊ±ÇËøòÊúâÂ§öÂ∞ëÈí±Âêß, 
ˇsh
ÊòØ
gë_ˇsh
, Â¶ÇÊûúÊòØË¶ÅËµÑ‰∫ßÊòØ
	`gë_vÆue
()

77 #ˇsh = 
£lf
.
brokî
.
	`gë_ˇsh
()

78 
vÆue
 = 
£lf
.
brokî
.
	$gë_vÆue
()

80 
›í_¥i˚
 = 
£lf
.
d©a_›í
[0]

82 
size1
 = (
vÆue
/
›í_¥i˚
*0.15)

83 #size2 = (
vÆue
/
›í_¥i˚
*0.25)

89 if(
£lf
.
sma1
[0] > sñf.
sma2
[0]):

91 if(
£lf
.
sma2
[0] > sñf.
sma3
[0]):

92 
£lf
.
	$‹dî_èrgë_≥r˚¡
(
èrgë
=0.20)

94 
£lf
.
	$‹dî_èrgë_≥r˚¡
(
èrgë
=0.10)

96 if(
£lf
.
sma1
[0] < sñf.
sma2
[0]):

97 if(
£lf
.
sma2
[0] < sñf.
sma3
[0]):

98 
£lf
.
	`‹dî_èrgë_≥r˚¡
(
èrgë
=-0.20)

100 
£lf
.
	`‹dî_èrgë_≥r˚¡
(
èrgë
=-0.10)

103 if(
£lf
.
sma1
[0] > sñf.
sma2
[0] 
™d


104 
£lf
.
sma1
[-1] < sñf.
sma2
[-1]):

106 
£lf
.
	$˛o£
()

107 
£lf
.
	`buy_bøckë
(
size
=
size1
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price-60)

109 if(
£lf
.
sma1
[0] < sñf.
sma2
[0] 
™d


110 
£lf
.
sma1
[-1] > sñf.
sma2
[-1]):

112 
£lf
.
	$˛o£
()

113 
£lf
.
	`£Œ_bøckë
(
size
=
size1
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price+60)

116 
__«me__
 == '__main__':

117 #Cª©ê
a
 
˚ªbro
 
ítôy


118 
˚ªbro
 = 
bt
.
	$Cîebro
()

120 #Add 
a
 
°øãgy


121 
˚ªbro
.
	$add°øãgy
(
Så©egy_MA
)

125 
˚ªbro
.
brokî
.
	$£tcommissi⁄
(
commissi⁄
=0.0008, 
öãª°
=0.05475)

127 #Cª©ê
a
 
D©a
 
Fìd


128 #Êú¨Âú∞Êï∞ÊçÆÔºåÁ¨îËÄÖÁî®
Wöd
Ëé∑ÂèñÁöÑ‰∏úÈ£éÊ±ΩËΩ¶Êï∞ÊçÆ‰ª•
csv
ÂΩ¢ÂºèÂ≠òÂÇ®Âú®Êú¨Âú∞„ÄÇ

129 #∑ø£_d©e†
True
ÊòØ‰∏∫‰∫ÜËØªÂèñ
csv
‰∏∫
d©a‰ame
ÁöÑÊó∂ÂÄôËÉΩÂ§üËá™Âä®ËØÜÂà´
d©ëime
Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå
big
‰Ωú‰∏∫
ödex


130 #Ê≥®ÊÑèÔºåËøôÈáåÊúÄÂêéÁöÑ
∑ndas
Ë¶ÅÁ¨¶Âêà
backåadî
ÁöÑË¶ÅÊ±ÇÁöÑÊ†ºÂºè

131 
d©a‰ame
 = 
Fö™˚D©aSour˚
.
	$gë_d©a
(
Fö™˚D©aSour˚
.
°r_t⁄ghuashun
, Fö™˚D©aSour˚.
t⁄ghuashun_AGTD
)

132 
d©a‰ame
['openinterest'] = 0

133 
d©a
 = 
bt
.
„eds
.
	$P™dasD©a
(
d©™ame
=
d©a‰ame
)

134 #Add 
the
 
D©a
 
Fìd
 
to
 
Cîebro


135 
˚ªbro
.
	$addd©a
(
d©a
)

138 #˚ªbro.
	`addsizî
(
bt
.
sizîs
.
Pî˚¡Sizî
, 
≥r˚¡s
=10)

141 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
Sh¨≥R©io
, 
_«me
='SharpeRatio')

142 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
DøwDown
, 
_«me
='DW')

144 #Së 
our
 
desúed
 
ˇsh
 
°¨t


145 
˚ªbro
.
brokî
.
	$£tˇsh
(50000.0)

147 #Pröà
out
 
the
 
°¨tög
 
c⁄dôi⁄s


148 
	`¥öt
('Sèπög P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

150 #Ru¿
ovî
 
evîythög


151 
ªsu…s
 = 
˚ªbro
.
	$run
()

153 #Pröà
out
 
the
 
föÆ
 
ªsu…


154 
	`¥öt
('FöÆ P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

155 #PlŸ 
the
 
ªsu…


156 #˚ªbro.
	`∂Ÿ
()

159 
°øt
 = 
ªsu…s
[0]

160 
	`¥öt
('Â§èÊôÆÊØîÁéá:', 
°øt
.
™Æyzîs
.
Sh¨≥R©io
.
	$gë_™Æysis
())

161 
	`¥öt
('ÊúÄÂ§ßÂõûÊí§:', 
°øt
.
™Æyzîs
.
DW
.
	`gë_™Æysis
())

	@E:\Program\python\PythonFinance\BackTrader\Strategy_MA_2.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-11-07 21:19:12

6 #Fûê
Name
: 
ßm∂e1
.
py


8 
‰om
 
__futuª__
 
	$imp‹t
 (
absﬁuã_imp‹t
, 
divisi⁄
, 
¥öt_fun˘i⁄
,

9 
unicode_lôîÆs
)

11 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


12 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


13 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
	`«me
 (
ö
 
¨gv
[0])

14 #imp‹à
∑ndas
 
as
 
pd


15 #‰om 
WödPy
 
imp‹t
 
w


16 #Imp‹à
the
 
backåadî
 
∂©f‹m


17 
imp‹t
 
backåadî
 
as
 
bt


18 
imp‹t
 
sys


19 
sys
.
∑th
.
	`≠≥nd
("../FinanceDataSource")

20 
imp‹t
 
Fö™˚D©aSour˚


23 #Cª©ê
a
 
Så©ey


26 #ÂΩì
MACD
Âá∫Áé∞Á™ÅÁ†¥ÁöÑÊó∂ÂÄôÔºå10%‰ªì‰Ωç„ÄÇ

27 
˛ass
 
	$Så©egy_MA
(
bt
.
Så©egy
):

29 
∑øms
 = (('ma1', 5), ('ma2', 10), ('ma3', 20))

31 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
):

33 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

34 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

36 
def
 
	$__öô__
(
£lf
):

38 
£lf
.
sma1
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma1
)

39 
£lf
.
sma2
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma2
)

40 
£lf
.
sma3
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma3
)

41 
£lf
.
‹dî
 = 
N⁄e


43 
def
 
	$nŸify
(
£lf
, 
‹dî
):

44 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

45 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

48 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


49 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


50 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

51 
‹dî
.
	$isbuy
():

52 
£lf
.
	`log
(

54 (
‹dî
.
execuãd
.
size
,

55 
‹dî
.
execuãd
.
¥i˚
,

56 
‹dî
.
execuãd
.
vÆue
,

57 
‹dî
.
execuãd
.
comm
))

59 
£lf
.
buy¥i˚
 = 
‹dî
.
execuãd
.
¥i˚


60 
£lf
.
buycomm
 = 
‹dî
.
execuãd
.
comm


61 
£lf
.
›size
 = 
‹dî
.
execuãd
.
size


63 
£lf
.
	`log
('SELL EXECUTED, %d, Price: %.2f, Cost: %.2f, Comm %.2f' %

64 (
‹dî
.
execuãd
.
size
,

65 
‹dî
.
execuãd
.
¥i˚
,

66 
‹dî
.
execuãd
.
vÆue
,

67 
‹dî
.
execuãd
.
comm
))

69 
def
 
	$√xt
(
£lf
):

70 #Sim∂y 
log
 
the
 
˛osög
 
¥i˚
 
of
Åhê
£rõs
 
‰om
Åhê
ª„ªn˚


71 #£lf.
	`log
('Clo£, %.2f' % 
£lf
.
d©a˛o£
[0])

73 #Check 
™
 
‹dî
 
is
 
≥ndög
 ... 
yes
, 
we
 
ˇ¬Ÿ
 
£nd
 
a
 2
nd
 
⁄e


74 
£lf
.
‹dî
:

76 #ÂÖàÊ±ÇËøòÊúâÂ§öÂ∞ëÈí±Âêß, 
ˇsh
ÊòØ
gë_ˇsh
, Â¶ÇÊûúÊòØË¶ÅËµÑ‰∫ßÊòØ
	`gë_vÆue
()

77 
ˇsh
 = 
£lf
.
brokî
.
	$gë_ˇsh
()

78 #vÆuê
£lf
.
brokî
.
	`gë_vÆue
()

80 
›í_¥i˚
 = 
£lf
.
d©a_›í
[0]

82 
size1
 = (
ˇsh
/
›í_¥i˚
*0.15)

83 #size2 = (
vÆue
/
›í_¥i˚
*0.25)

85 if(
£lf
.
sma1
[0] > sñf.
sma2
[0] 
™d


86 
£lf
.
sma1
[-1] < sñf.
sma2
[-1]):

88 
Æªady_size
 = 
£lf
.
posôi⁄
.
size


89 #if(
Æªady_size
 < 0):

90 #£lf.
	`˛o£
()

92 #£lf.
	`buy_bøckë
(
size
=
size1
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price-60)

93 
£lf
.
	$buy
(
size
=
size1
)

95 if(
£lf
.
sma1
[0] < sñf.
sma2
[0] 
™d


96 
£lf
.
sma1
[-1] > sñf.
sma2
[-1]):

98 
Æªady_size
 = 
£lf
.
posôi⁄
.
size


99 #if(
Æªady_size
 > 0):

100 #£lf.
	`˛o£
()

102 #£lf.
	`£Œ_bøckë
(
size
=
size1
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price+60)

103 
£lf
.
	$£Œ
(
size
=
size1
)

106 
__«me__
 == '__main__':

107 #Cª©ê
a
 
˚ªbro
 
ítôy


108 
˚ªbro
 = 
bt
.
	$Cîebro
()

110 #Add 
a
 
°øãgy


111 
˚ªbro
.
	$add°øãgy
(
Så©egy_MA
)

115 
˚ªbro
.
brokî
.
	$£tcommissi⁄
(
commissi⁄
=0.0008, 
öãª°
=0.05475)

117 #Cª©ê
a
 
D©a
 
Fìd


118 #Êú¨Âú∞Êï∞ÊçÆÔºåÁ¨îËÄÖÁî®
Wöd
Ëé∑ÂèñÁöÑ‰∏úÈ£éÊ±ΩËΩ¶Êï∞ÊçÆ‰ª•
csv
ÂΩ¢ÂºèÂ≠òÂÇ®Âú®Êú¨Âú∞„ÄÇ

119 #∑ø£_d©e†
True
ÊòØ‰∏∫‰∫ÜËØªÂèñ
csv
‰∏∫
d©a‰ame
ÁöÑÊó∂ÂÄôËÉΩÂ§üËá™Âä®ËØÜÂà´
d©ëime
Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå
big
‰Ωú‰∏∫
ödex


120 #Ê≥®ÊÑèÔºåËøôÈáåÊúÄÂêéÁöÑ
∑ndas
Ë¶ÅÁ¨¶Âêà
backåadî
ÁöÑË¶ÅÊ±ÇÁöÑÊ†ºÂºè

121 
d©a‰ame
 = 
Fö™˚D©aSour˚
.
	$gë_d©a
(
Fö™˚D©aSour˚
.
°r_t⁄ghuashun
, Fö™˚D©aSour˚.
t⁄ghuashun_AGTD
)

122 
d©a‰ame
['openinterest'] = 0

123 
d©a
 = 
bt
.
„eds
.
	$P™dasD©a
(
d©™ame
=
d©a‰ame
)

124 #Add 
the
 
D©a
 
Fìd
 
to
 
Cîebro


125 
˚ªbro
.
	$addd©a
(
d©a
)

128 #˚ªbro.
	`addsizî
(
bt
.
sizîs
.
Pî˚¡Sizî
, 
≥r˚¡s
=10)

131 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
Sh¨≥R©io
, 
_«me
='SharpeRatio')

132 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
DøwDown
, 
_«me
='DW')

134 #Së 
our
 
desúed
 
ˇsh
 
°¨t


135 
˚ªbro
.
brokî
.
	$£tˇsh
(50000.0)

137 #Pröà
out
 
the
 
°¨tög
 
c⁄dôi⁄s


138 
	`¥öt
('Sèπög P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

140 #Ru¿
ovî
 
evîythög


141 
ªsu…s
 = 
˚ªbro
.
	$run
()

143 #Pröà
out
 
the
 
föÆ
 
ªsu…


144 
	`¥öt
('FöÆ P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

145 #PlŸ 
the
 
ªsu…


146 #˚ªbro.
	`∂Ÿ
()

149 
°øt
 = 
ªsu…s
[0]

150 
	`¥öt
('Â§èÊôÆÊØîÁéá:', 
°øt
.
™Æyzîs
.
Sh¨≥R©io
.
	$gë_™Æysis
())

151 
	`¥öt
('ÊúÄÂ§ßÂõûÊí§:', 
°øt
.
™Æyzîs
.
DW
.
	`gë_™Æysis
())

	@E:\Program\python\PythonFinance\BackTrader\Strategy_MA_3.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-11-07 21:20:35

6 #Fûê
Name
: 
ßm∂e1
.
py


8 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


9 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


10 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
«me
 (
ö
 
¨gv
[0])

11 #imp‹à
∑ndas
 
as
 
pd


12 #‰om 
WödPy
 
imp‹t
 
w


13 #Imp‹à
the
 
backåadî
 
∂©f‹m


14 
imp‹t
 
backåadî
 
as
 
bt


15 
imp‹t
 
sys


16 
	gsys
.
	g∑th
.
≠≥nd
("../FinanceDataSource")

17 
imp‹t
 
	gFö™˚D©aSour˚


20 #Cª©ê
a
 
Så©ey


23 #ÂΩì
MACD
Âá∫Áé∞Á™ÅÁ†¥ÁöÑÊó∂ÂÄôÔºå10%‰ªì‰Ωç„ÄÇ

24 
˛ass
 
	$Så©egy_MA
(
bt
.
Så©egy
):

26 
∑øms
 = (

32 ('¥öéog', 
FÆ£
)

35 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
, 
i•röt
=
FÆ£
):

37 
£lf
.
∑øms
.
¥öéog
 
‹
 
i•röt
:

38 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

39 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

41 
def
 
	$__öô__
(
£lf
):

43 
£lf
.
sma1
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma1
)

44 
£lf
.
sma2
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma2
)

45 
£lf
.
sma3
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma3
)

46 
£lf
.
‹dî
 = 
N⁄e


48 
def
 
	$nŸify
(
£lf
, 
‹dî
):

49 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

50 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

53 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


54 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


55 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

56 
‹dî
.
	$isbuy
():

57 
£lf
.
	`log
(

59 (
‹dî
.
execuãd
.
size
,

60 
‹dî
.
execuãd
.
¥i˚
,

61 
‹dî
.
execuãd
.
vÆue
,

62 
‹dî
.
execuãd
.
comm
))

64 
£lf
.
buy¥i˚
 = 
‹dî
.
execuãd
.
¥i˚


65 
£lf
.
buycomm
 = 
‹dî
.
execuãd
.
comm


66 
£lf
.
›size
 = 
‹dî
.
execuãd
.
size


68 
£lf
.
	`log
('SELL EXECUTED, %d, Price: %.2f, Cost: %.2f, Comm %.2f' %

69 (
‹dî
.
execuãd
.
size
,

70 
‹dî
.
execuãd
.
¥i˚
,

71 
‹dî
.
execuãd
.
vÆue
,

72 
‹dî
.
execuãd
.
comm
))

74 
def
 
	$°›
(
£lf
):

75 
£lf
.
	`log
('(%d, %d)(%d, %d) Ending Value %.2f' %

76 (
£lf
.
∑øms
.
ma1
, sñf.∑øms.
ma2
, sñf.∑øms.
≥r˚¡_‹dî_1
, sñf.∑øms.
≥r˚¡_‹dî_2
, sñf.
brokî
.
	`gëvÆue
()), 
i•röt
=
True
)

78 
def
 
	$√xt
(
£lf
):

86 
≥r˚¡_‹dî
 = 0

88 
ma1_now
 = 
£lf
.
sma1
[0]

89 
ma1_¥e
 = 
£lf
.
sma1
[-1]

90 
ma2_now
 = 
£lf
.
sma2
[0]

91 
ma2_¥e
 = 
£lf
.
sma2
[-1]

93 #›í_¥i˚ = 
£lf
.
d©a_›í
[0]

95 
ma1_now
 > 
ma1_¥e
:

96 
≥r˚¡_‹dî
 =Öî˚¡_‹dî + 
£lf
.
∑øms
.
≥r˚¡_‹dî_1
/100

98 
≥r˚¡_‹dî
 =Öî˚¡_‹dî - 
£lf
.
∑øms
.
≥r˚¡_‹dî_1
/100

100 
ma2_now
 > 
ma2_¥e
:

101 
≥r˚¡_‹dî
 =Öî˚¡_‹dî + 
£lf
.
∑øms
.
≥r˚¡_‹dî_2
/100

103 
≥r˚¡_‹dî
 =Öî˚¡_‹dî - 
£lf
.
∑øms
.
≥r˚¡_‹dî_2
/100

107 
£lf
.
‹dî
 = sñf.
	`‹dî_èrgë_≥r˚¡
(
èrgë
=
≥r˚¡_‹dî
)

110 #cuºít_¥i˚ = 
£lf
.
posôi⁄
.
¥i˚


111 
cuºít_size
 = 
£lf
.
posôi⁄
.
size


114 
vÆue
 = 
£lf
.
brokî
.
	$gë_vÆue
()

116 
√ed_size
 = 
vÆue
 / 
›í_¥i˚
 * 
≥r˚¡_‹dî


118 i‡(
≥r˚¡_‹dî
 > 0):

120 if(
cuºít_size
 > 0):

123 if(
√ed_size
 > 
cuºít_size
):

125 
£lf
.
‹dî
 = sñf.
	`buy_bøckë
(
size
=
√ed_size
-
cuºít_size
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price-100)

128 
£lf
.
‹dî
 = sñf.
	$˛o£
()

130 
£lf
.
‹dî
 = sñf.
	`buy_bøckë
(
size
=
√ed_size
, 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price-100)

133 if(
cuºít_size
 > 0):

135 
£lf
.
‹dî
 = sñf.
	$˛o£
()

137 
£lf
.
‹dî
 = sñf.
	`£Œ_bøckë
(
size
=
	`abs
(
√ed_size
), 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price+100)

140 
£lf
.
‹dî
 = sñf.
	`£Œ_bøckë
(
size
=
	`abs
(
√ed_size
 - 
cuºít_size
), 
¥i˚
=
›í_¥i˚
, 
°›¥i˚
=open_price+100)

142 
__«me__
 == '__main__':

143 #Cª©ê
a
 
˚ªbro
 
ítôy


144 
˚ªbro
 = 
bt
.
	$Cîebro
()

146 #Add 
a
 
°øãgy


148 
˚ªbro
.
	$add°øãgy
(
Så©egy_MA
)

149 #˚ªbro.
	`›t°øãgy
(
Så©egy_MA
,

152 #≥r˚¡_‹dî_1=
	`ønge
(10, 30),

153 #≥r˚¡_‹dî_2=
	`ønge
(10, 20)

157 
˚ªbro
.
brokî
.
	$£tcommissi⁄
(
commissi⁄
=0.0008, 
öãª°
=0.05475)

159 #Cª©ê
a
 
D©a
 
Fìd


160 #∑ø£_d©e†
True
ÊòØ‰∏∫‰∫ÜËØªÂèñ
csv
‰∏∫
d©a‰ame
ÁöÑÊó∂ÂÄôËÉΩÂ§üËá™Âä®ËØÜÂà´
d©ëime
Ê†ºÂºèÁöÑÂ≠óÁ¨¶‰∏≤Ôºå
big
‰Ωú‰∏∫
ödex


161 #Ê≥®ÊÑèÔºåËøôÈáåÊúÄÂêéÁöÑ
∑ndas
Ë¶ÅÁ¨¶Âêà
backåadî
ÁöÑË¶ÅÊ±ÇÁöÑÊ†ºÂºè

162 
d©a‰ame
 = 
Fö™˚D©aSour˚
.
	$gë_d©a
(
Fö™˚D©aSour˚
.
°r_t⁄ghuashun
, Fö™˚D©aSour˚.
t⁄ghuashun_AGTD
)

163 
d©a‰ame
['openinterest'] = 0

164 
d©a
 = 
bt
.
„eds
.
	$P™dasD©a
(
d©™ame
=
d©a‰ame
)

165 #Add 
the
 
D©a
 
Fìd
 
to
 
Cîebro


166 
˚ªbro
.
	$addd©a
(
d©a
)

169 #˚ªbro.
	`addsizî
(
bt
.
sizîs
.
Pî˚¡Sizî
, 
≥r˚¡s
=10)

172 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
Sh¨≥R©io
, 
_«me
='SharpeRatio')

173 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
DøwDown
, 
_«me
='DW')

174 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
A¬uÆRëu∫
, 
_«me
='AnnualReturn')

175 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
CÆm¨
, 
_«me
='Calmar')

176 #˚ªbro.
	`add™Æyzî
(
bt
.
™Æyzîs
.
PîiodSèts
, 
_«me
='PeriodStats')

177 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
Rëu∫s
, 
_«me
='Returns')

178 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
TødeA«lyzî
, 
_«me
='TradeAnalyzer')

179 
˚ªbro
.
	`add™Æyzî
(
bt
.
™Æyzîs
.
SQN
, 
_«me
='SQN')

181 #Së 
our
 
desúed
 
ˇsh
 
°¨t


182 
˚ªbro
.
brokî
.
	$£tˇsh
(50000.0)

184 #Pröà
out
 
the
 
°¨tög
 
c⁄dôi⁄s


185 
	`¥öt
('Sèπög P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

187 #Ru¿
ovî
 
evîythög


188 
ªsu…s
 = 
˚ªbro
.
	$run
()

190 #Pröà
out
 
the
 
föÆ
 
ªsu…


191 
	`¥öt
('FöÆ P‹tfﬁiÿVÆue: %.2f' % 
˚ªbro
.
brokî
.
	$gëvÆue
())

192 #PlŸ 
the
 
ªsu…


193 #˚ªbro.
	`∂Ÿ
()

196 
°øt
 = 
ªsu…s
[0]

197 #¥öt('Â§èÊôÆÊØîÁéá:', 
°øt
.
™Æyzîs
.
Sh¨≥R©io
.
	`gë_™Æysis
())

198 #¥öt('ÊúÄÂ§ßÂõûÊí§:', 
°øt
.
™Æyzîs
.
DW
.
	`gë_™Æysis
())

199 #¥öt('Âπ¥Â∫¶ÂõûÊí§Ôºö', 
°øt
.
™Æyzîs
.
A¬uÆRëu∫
.
	`gë_™Æysis
())

200 #¥öt('CÆm¨Ôºö', 
°øt
.
™Æyzîs
.
CÆm¨
.
	`gë_™Æysis
())

201 #¥öt('PîiodSètsÔºö', 
°øt
.
™Æyzîs
.
PîiodSèts
.
	`gë_™Æysis
())

202 #¥öt('Âπ¥ÂåñÊî∂ÁõäÔºö', 
°øt
.
™Æyzîs
.
Rëu∫s
.
	`gë_™Æysis
())

203 #¥öt('TødeA«lyzîÔºö', 
°øt
.
™Æyzîs
.
TødeA«lyzî
.
	`gë_™Æysis
())

204 #¥öt('SQNÊåáÊï∞Ôºö', 
°øt
.
™Æyzîs
.
SQN
.
	`gë_™Æysis
())

	@E:\Program\python\PythonFinance\BackTrader\Strategy_MA_4.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-20 20:49:18

5 #La° 
Ch™ge
: 2017-10-08 20:28:36

6 #Fûê
Name
: 
ßm∂e1
.
py


8 #imp‹à
d©ëime
 #F‹ d©ëimê
obje˘s


9 #imp‹à
os
.
∑th
 #Tÿ
m™age
 
∑ths


10 #imp‹à
sys
 #Tÿ
föd
 
out
 
the
 
s¸ùt
 
«me
 (
ö
 
¨gv
[0])

11 #imp‹à
∑ndas
 
as
 
pd


12 #‰om 
WödPy
 
imp‹t
 
w


13 #Imp‹à
the
 
backåadî
 
∂©f‹m


15 
‰om
 
Så©egy_maö
 
imp‹t
 
Så©egyBa£


16 
imp‹t
 
backåadî
 
as
 
	gbt


18 #Cª©ê
a
 
Så©ey


23 
˛ass
 
	$Så©egy_MA
(
Så©egyBa£
):

24 
∑øms
 = (

28 ('¥öéog', 
FÆ£
)

31 
def
 
	$gë_√ed_posôi⁄
(
£lf
):

33 
åy
:

34 #È¶ñÂÖàÂèñÂæó
TødeA«lyzî
ÔºåËøôÈáåÊúâËÉúÁéáÔºåÁõàÂà©ÈáëÈ¢ùÔºåÁ≠âÁ≠â‰ø°ÊÅØ

35 
è
 = 
£lf
.
™Æyzîs
.
TødeA«lyzî
.
	$gë_™Æysis
()

36 
‹dî_cou¡
 = 
è
['total']['closed']

37 
w⁄_cou¡
 = 
è
['won']['total']

38 
w⁄_avîage
 = 
è
['won']['pnl']['average']

39 #lo°_cou¡ = 
è
['lost']['total']

40 
lo°_avîage
 = 
	`abs
(
è
['lost']['pnl']['average'])

41 
≥ûv
 = 
w⁄_avîage
 / 
lo°_avîage


42 #kaûò(
w⁄_cou¡
 / 
‹dî_cou¡
 * 
≥ûv
 - 
lo°_cou¡
 / order_count) / (peilv)

43 
p
 = 
w⁄_cou¡
 / 
‹dî_cou¡


44 
kaûi
 = 
p
 - (1 -ÖË/ 
≥ûv


46 if(
kaûi
 > 0.5 
‹
 kaili < 0.05):

48  
kaûi


49 
ex˚±
 
Ex˚±i⁄
 
as
 
îr
:

50 
£lf
.
	$log
(
îr
, 
i•röt
=
True
)

53 
def
 
	$__öô__
(
£lf
):

55 
£lf
.
sma1
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma1
)

56 
£lf
.
sma2
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma2
)

57 
£lf
.
sma3
 = 
bt
.
èlib
.
	$SMA
(
£lf
.
d©a
, 
timïîiod
=£lf.
∑øms
.
ma3
)

58 
£lf
.
‹dî
 = 
N⁄e


60 
def
 
	$√xt
(
£lf
):

64 if(
£lf
.
sma1
[0] > sñf.
sma2
[0] 
™d


65 
£lf
.
sma1
[-1] < sñf.
sma2
[-1]):

67 
pos_≥r˚¡
 = 
£lf
.
	$gë_√ed_posôi⁄
()

68 
£lf
.
‹dî
 = sñf.
	$‹dî_èrgë_≥r˚¡
(
èrgë
=
pos_≥r˚¡
)

69 
£lf
.
	`log
("‰π∞Âçï‰ªì‰ΩçÔºö%s" % (
pos_≥r˚¡
), 
i•röt
=
True
)

70 
∑ss


71 
	`ñif
(
£lf
.
sma1
[0] < sñf.
sma2
[0] 
™d


72 
£lf
.
sma1
[-1] > sñf.
sma2
[-1]):

74 
pos_≥r˚¡
 = 
£lf
.
	$gë_√ed_posôi⁄
()

75 
£lf
.
‹dî
 = sñf.
	`‹dî_èrgë_≥r˚¡
(
èrgë
=0 - 
pos_≥r˚¡
)

76 
£lf
.
	`log
("ÂçñÂçï‰ªì‰ΩçÔºö%s" % (
pos_≥r˚¡
), 
i•röt
=
True
)

77 
∑ss


	@E:\Program\python\PythonFinance\BackTrader\Strategy_main.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-10-08 10:30:59

5 #La° 
Ch™ge
: 2017-10-08 16:18:24

6 #Fûê
Name
: 
Så©egy_maö
.
py


8 
imp‹t
 
backåadî
 
as
 
bt


11 
˛ass
 
	$Så©egyBa£
(
bt
.
Så©egy
):

14 ‰ª•‰æøÊàëÁªßÊâøÂêéÔºåÊàëÂè™Áî®‰∫õ
√xt
ÊñπÊ≥ïÂíå
__öô__
ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ

17 
def
 
	$log
(
£lf
, 
txt
, 
dt
=
N⁄e
, 
i•röt
=
FÆ£
):

19 
£lf
.
∑øms
.
¥öéog
 
‹
 
i•röt
:

20 
dt
 = dà
‹
 
£lf
.
d©as
[0].
d©ëime
.
	$d©e
(0)

21 
	`¥öt
('%s, %s' % (
dt
.
	`isof‹m©
(), 
txt
))

23 
def
 
	$__öô__
(
£lf
):

24 
£lf
.
‹dî
 = 
N⁄e


26 
def
 
	$nŸify
(
£lf
, 
‹dî
):

27 
‹dî
.
°©us
 
ö
 [‹dî.
Submôãd
, ordî.
Ac˚±ed
]:

28 #Buy/
Sñl
 
‹dî
 
submôãd
/
ac˚±ed
 
to
/
by
 
brokî
 - 
NŸhög
Åo do

31 #Check 
™
 
‹dî
 
has
 
bìn
 
com∂ëed


32 #Aâíti⁄: 
brokî
 
could
 
ªje˘
 
‹dî
 
nŸ
 
íougth
 
ˇsh


33 
‹dî
.
°©us
 
ö
 [‹dî.
Com∂ëed
, ordî.
C™˚Àd
, ordî.
M¨gö
]:

34 
‹dî
.
	$isbuy
():

35 
£lf
.
	`log
(

37 (
‹dî
.
execuãd
.
size
,

38 
‹dî
.
execuãd
.
¥i˚
,

39 
‹dî
.
execuãd
.
vÆue
,

40 
‹dî
.
execuãd
.
comm
), 
i•röt
=
True
)

42 
£lf
.
buy¥i˚
 = 
‹dî
.
execuãd
.
¥i˚


43 
£lf
.
buycomm
 = 
‹dî
.
execuãd
.
comm


44 
£lf
.
›size
 = 
‹dî
.
execuãd
.
size


46 
£lf
.
	`log
('SELL EXECUTED, %d, Price: %.2f, Cost: %.2f, Comm %.2f' %

47 (
‹dî
.
execuãd
.
size
,

48 
‹dî
.
execuãd
.
¥i˚
,

49 
‹dî
.
execuãd
.
vÆue
,

50 
‹dî
.
execuãd
.
comm


51 ), 
i•röt
=
True
)

53 
def
 
	$°›
(
£lf
):

54 
∑ss


	@E:\Program\python\PythonFinance\CandlestickOhlc\CandlestickOhlc.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-03 20:47:16

5 #La° 
Ch™ge
: 2017-10-07 20:27:14

6 #Fûê
Name
: 
sim∂e_1
.
py


8 
‰om
 
	gm©∂Ÿlib
.
d©es
 
imp‹t
 
	gD©eF‹m©ãr
, 
	gWìkdayLoˇt‹
,\

9 
	gDayLoˇt‹
, 
MONDAY


10 
‰om
 
m∂_fö™˚
 
imp‹t
 
ˇndÀ°ick_ohlc


11 
imp‹t
 
∑ndas
 
as
 
pd


12 
imp‹t
 
d©ëime


13 
imp‹t
 
	gm©∂Ÿlib
.
py∂Ÿ
 
as
 
	g∂t
 #Imp‹à
m©∂Ÿlib


14 
imp‹t
 
pyœb


15 
imp‹t
 
numpy
 
as
 
≈


18 
def
 
ˇndÀ°ick_ohlc
(
d©
, 
°ick
="day", 
sh¨e£rõs
=
N⁄e
, 
Ÿhî£rõs
=None):

20 Ëøô‰∏™ÊñπÊ≥ïÁî®Êù•ÁªòÂà∂
k
Á∫øÂõæÁöÑÔºåÁé∞Âú®Â∑≤ÁªèÂèØ‰ª•ÊòæÁ§∫kÁ∫øÂõæÔºåÈôÑÂä†Âú®‰∏ªÂõæ‰∏äÁöÑÊåáÊ†áÂíåÂÖ∂‰ªñÂçïÁã¨ÊòæÁ§∫ÁöÑÂ≠óË°®„ÄÇ

21 :
∑øm
 
d©
: 
∑ndas
 
D©aFøme
 
obje˘
 
wôh
 
d©ëime64
 
ödex
, 
™d
 
	gcﬁumns
 "O≥n", "High", "Low", 
	g™d
 "Clo£", 
likñy
 
¸óãd
 
vü
 
D©aRódî
 
	g‰om
 "yahoo"

22 :
∑øm
 
°ick
: 
A
 
°rög
 
‹
 
numbî
 
ödiˇtög
 
the
 
≥riod
 
of
 
time
 
covîed
 
by
 
a
 
sögÀ
 
ˇndÀ°ick
. 
VÆid
 såög 
öputs
 
ö˛ude
 "day", "wìk", "m⁄th", 
	g™d
 "yór", ("day" ), 
™d
 
™y
 
numîic
 
öput
 
ödiˇãs
Åhênumbî o‡
åadög
 
days
 
ö˛uded
 
ö
á 
	g≥riod


23 :
∑øm
 
sh¨e£rõs
: Ëøô‰∏™ÊòØÂÖ±Áî®Âú®‰∏ªÂõæ‰∏äÁöÑ
An
 
ôîabÀ
 
th©
 
wûl
 
be
 
c€r˚d
 
öto
 
a
 
li°
, 
c⁄èöög
 
the
 
cﬁumns
 
of
 
d©
Åh© 
hﬁd
 
Ÿhî
 
£rõs
 
to
 bê
∂Ÿãd
 
as
 
	glöes


24 :
∑øm
 
Ÿhî£rõs
: ÂÖ∂‰ªñÁöÑÂõæÂΩ¢ÔºåÊØîÂ¶Ç
KDJ
Ôºå
RSI
‰πãÁ±ªÁöÑ

26 
This
 
wûl
 
show
 
a
 
J≠™e£
 
ˇndÀ°ick
 
∂Ÿ
 
°ock
 
d©a
 
°‹ed
 
ö
 
d©
, 
Æso
 
∂Ÿtög
 
Ÿhî
 
£rõs
 
	g∑s£d
.

28 
	gm⁄days
 = 
	$WìkdayLoˇt‹
(
MONDAY
Ë#maj‹ 
ticks
 
⁄
 
the
 
m⁄days
 Ëé∑ÂæóÊØèÂë®‰∏ÄÁöÑÊó•ÊúüÊï∞ÊçÆÔºåËøô‰∏™ÂΩì‰∏ªË¶ÅÂàªÂ∫¶

29 
Ældays
 = 
	$DayLoˇt‹
(Ë#mö‹ 
ticks
 
⁄
 
the
 
days
 Ëé∑ÂæóÁæéÊó•Êï∞ÊçÆÔºåËøô‰∏™ÂΩìÊ¨°Ë¶ÅÂàªÂ∫¶

30 #dayF‹m©ã∏
	`D©eF‹m©ãr
('%d'Ë#e.
g
., 12

31 #ax.
xaxis
.
	`£t_maj‹_f‹m©ãr
(
m⁄dayF‹m©ãr
)ÔºåÁî®Ëøô‰∏™Êù•ËÆæÂÆöÊ†ºÂºè

33 #Cª©ê
a
 
√w
 
D©aFøme
 
which
 
ö˛udes
 
OHLC
 
d©a
 
óch
 
≥riod
 
•ecifõd
 
by
 
°ick
 
öput


35 
å™sd©
 = 
d©
.
loc
[:, ["Open", "High", "Low", "Close"]]

38 i‡(
	`ty≥
(
°ick
Ë=
°r
):

40 
°ick
 == "day":

42 
∂Ÿd©
 = 
å™sd©


43 
°ick
 = 1 #U£d 
∂Ÿtög


45 
ñif
 
°ick
 
ö
 ["week", "month", "year"]:

47 
°ick
 == "week":

48 #∑ndasÊèê‰æõ
to_d©ëime
ÊñπÊ≥ïÂ∞Ü‰ª£Ë°®Êó∂Èó¥ÁöÑÂ≠óÁ¨¶ËΩ¨Âåñ‰∏∫
Time°amp
ÂØπË±°, Ëøô‰∏™ÂØπË±°ÊòØÊó∂Èó¥Êà≥Ôºö

49 
å™sd©
["wìk"] = 
pd
.
	`to_d©ëime
—ønsd©.
ödex
).
	`m≠
(
œmbda
 
x
: x.
	`isoˇÀnd¨
()[1]Ë#Idítify 
wìks


50 
ñif
 
°ick
 == "month":

51 
å™sd©
["m⁄th"] = 
pd
.
	`to_d©ëime
—ønsd©.
ödex
).
	$m≠
(
œmbda
 
x
: x.
m⁄th
Ë#Idítify 
m⁄ths


52 
å™sd©
["yór"] = 
pd
.
	`to_d©ëime
—ønsd©.
ödex
).
	`m≠
(
œmbda
 
x
: x.
	`isoˇÀnd¨
()[0]Ë#Idítify 
yórs


53 
grou≥d
 = 
å™sd©
.
	`groupby
(
	`li°
(
	`£t
(["yór", 
°ick
]))Ë#Grou∞
by
 
yór
 
™d
 
Ÿhî
 
≠¥›rüã
 
v¨übÀ


54 
∂Ÿd©
 = 
pd
.
	`D©aFøme
({"O≥n": [], "High": [], "Low": [], "Clo£": []
	}
}Ë#Cª©ê
em±y
 
d©a
 
‰ame
 
c⁄èöög
 
wh©
 
wûl
 
be
 
∂Ÿãd


55 
«me
, 
group
 
ö
 
	ggrou≥d
:

56 
∂Ÿd©
 =ÖlŸd©.
≠≥nd
(
pd
.
D©aFøme
({"O≥n": 
group
.
ûoc
[0, 0],

57 "High": 
max
(
group
.
High
),

58 "Low": 
mö
(
group
.
Low
),

59 "Clo£": 
group
.
ûoc
[-1, 3]},

60 
ödex
=[
group
.index[0]]))

61 
°ick
 == "week":

62 
°ick
 = 5

63 
ñif
 
°ick
 == "month":

64 
°ick
 = 30

65 
ñif
 
°ick
 == "year":

66 
°ick
 = 365

68 
ñif
 (
ty≥
(
°ick
Ë=
™d
 stick >= 1):

70 
å™sd©
["°ick"] = [
≈
.
Êo‹
(
i
 / 
°ick
Ëò
ö
 
ønge
(
Àn
—ønsd©.
ödex
))]

71 
grou≥d
 = 
å™sd©
.
groupby
("stick")

72 
∂Ÿd©
 = 
pd
.
D©aFøme
({"O≥n": [], "High": [], "Low": [], "Clo£": []}Ë#Cª©ê
em±y
 
d©a
 
‰ame
 
c⁄èöög
 
wh©
 
wûl
 
be
 
∂Ÿãd


73 
«me
, 
group
 
ö
 
	ggrou≥d
:

74 
∂Ÿd©
 =ÖlŸd©.
≠≥nd
(
pd
.
D©aFøme
({"O≥n": 
group
.
ûoc
[0, 0],

75 "High": 
max
(
group
.
High
),

76 "Low": 
mö
(
group
.
Low
),

77 "Clo£": 
group
.
ûoc
[-1, 3]},

78 
ödex
=[
group
.index[0]]))

81 
øi£
 
VÆueEº‹
('Valid inputsÅoárgument "stick" includeÅhe strings "day", "week", "month", "year", oráÖositive integer')

84 #Së 
∂Ÿ
 
∑ømëîs
, 
ö˛udög
 
the
 
axis
 
obje˘
 
ax
 
u£d
 
∂Ÿtög


85 
	gfig
, 
	gax
 = 
∂t
.
	$sub∂Ÿs
()

87 if(
Ÿhî£rõs
 
is
 
nŸ
 
N⁄e
):

88 
	`ty≥
(
Ÿhî£rõs
Ë!
li°
:

89 
Ÿhî£rõs
 = [otherseries]

90 
zôu_cou¡
 = 
	$Àn
(
Ÿhî£rõs
)

91 
zhutu_size
 = 2

93 
fig
 = 
∂t
.
	$figuª
(1)

95 
„ngedaxüo
 = (
zhutu_size
+
zôu_cou¡
, 1)

97 
ax
 = 
∂t
.
	`sub∂Ÿ2grid
(
„ngedaxüo
, (0, 0), 
row•™
=
zhutu_size
)

99 
k
 = 
zhutu_size


101 
k
 < 
zôu_cou¡
+
zhutu_size
:

103 
cﬁ_«me_1
 = 
Ÿhî£rõs
[
k
-
zhutu_size
]

104 #sh¨exÁöÑÊÑèÊÄùÊòØÂÖ±‰∫´
X
ËΩ¥

105 
ax2
 = 
∂t
.
	`sub∂Ÿ2grid
(
„ngedaxüo
, (
k
, 0), 
sh¨ex
=
ax
)

107 
d©
.
loc
[:, 
cﬁ_«me_1
].
	$∂Ÿ
(
ax
=
ax2
)

108 #ÊØîÂ¶ÇÂæóÂä†
°r
ËΩ¨Êç¢‰∏Ä‰∏™Ê†ºÂºè

109 
ax2
.
	`£t_tôÀ
(
	$°r
(
cﬁ_«me_1
))

110 
k
 = k + 1

111 
∑ss


115 #fig.
	`sub∂Ÿs_adju°
(
bŸtom
=0.2)

117 
∂Ÿd©
.
ödex
[-1] -ÖlŸd©.ödex[0] < 
pd
.
	`Timedñè
('730 days'):

118 
wìkF‹m©ãr
 = 
	`D©eF‹m©ãr
('%b %d'Ë#e.
g
., 
J™
 12

119 
ax
.
xaxis
.
	$£t_maj‹_loˇt‹
(
m⁄days
)

120 
ax
.
xaxis
.
	$£t_mö‹_loˇt‹
(
Ældays
)

123 
wìkF‹m©ãr
 = 
	`D©eF‹m©ãr
('%b %d, %Y')

125 
ax
.
xaxis
.
	$£t_maj‹_f‹m©ãr
(
wìkF‹m©ãr
)

127 
ax
.
	$grid
(
True
)

129 #Cª©ê
the
 
ˇndñ°ick
 
ch¨t


130 
	`ˇndÀ°ick_ohlc
(
ax
, 
	`li°
(
	`zù
÷i°(
pyœb
.
	`d©e2num
(
∂Ÿd©
.
ödex
.
	`tﬁi°
())),Ölotdat["Open"].tolist(),Ölotdat["High"].tolist(),

131 
∂Ÿd©
["Low"].
	`tﬁi°
(),Ölotdat["Close"].tolist())),

132 
cﬁ‹up
="ªd", 
cﬁ‹down
="gªí", 
width
=
°ick
 * .4)

134 #PlŸ 
Ÿhî
 
	`£rõs
 (
such
 
as
 
movög
 
avîages
Ëa†
löes


135 
sh¨e£rõs
 
is
 
nŸ
 
N⁄e
:

136 
	`ty≥
(
sh¨e£rõs
Ë!
li°
:

137 
sh¨e£rõs
 = [shareseries]

138 
d©
.
loc
[:, 
sh¨e£rõs
].
	$∂Ÿ
(
ax
˜x, 
lw
=1.3, 
grid
=
True
)

140 
ax
.
	$xaxis_d©e
()

141 
ax
.
	$autosˇÀ_võw
()

142 
∂t
.
	`£ç
’….
	`gˇ
().
	`gë_xtickœbñs
(), 
rŸ©i⁄
=45, 
h‹iz⁄èœlignmít
='right')

144 
∂t
.
	$show
()

147 
__«me__
 == "__main__":

148 #Wê
wûl
 
look
 
©
 
°ock
 
¥i˚s
 
ovî
 
the
 
∑°
 
yór
, 
°¨tög
áà
J™u¨y
 1, 2016

149 
°¨t
 = 
d©ëime
.
	$d©ëime
(2016, 1, 1)

150 
íd
 = 
d©ëime
.
d©e
.
	$today
()

151 #Lë'†gë AµÀ stock d©a; AµÀ'
s
 
tickî
 
symbﬁ
 
is
 
AAPL


152 #Fú° 
¨gumít
 
is
 
the
 
£rõs
 
we
 
w™t
, 
£c⁄d
 i†thê
	`sour˚
 ("yahoo" 
Yahoo
! 
Fö™˚
), 
thúd
 i†thê
°¨t
 
d©e
, 
fouπh
 i†thê
íd
 date

153 #≠∂ê
web
.
	`D©aRódî
("AAPL", "yahoo", 
°¨t
, 
íd
)

154 
imp‹t
 
sys


155 
sys
.
∑th
.
	`≠≥nd
("../FinanceDataSource")

156 
imp‹t
 
Fö™˚D©aSour˚


157 #yahoo_s_p_500 = 
öô_d©a
.
	`gë_d©a
(öô_d©a.
°r_∑ndas_d©¨ódî
, inô_d©a.
yahoo_s_p_500
)

158 #∑ndas_ˇndÀ°ick_ohlc(
yahoo_s_p_500
)

159 
d©a
 = 
Fö™˚D©aSour˚
.
	$gë_t⁄ghuashun_d©a
(
Fö™˚D©aSour˚
.
t⁄ghuashun_AGUSDO
)

161 
imp‹t
 
èlib


162 
d©a
["20d"] = 
èlib
.
	`MA
(d©a["Clo£"].
	`as_m©rix
(), 20)

163 
d©a
["120d"] = 
èlib
.
	`MA
(d©a["Clo£"].
	`as_m©rix
(), 120)

164 
	`ˇndÀ°ick_ohlc
(
d©a
, 
°ick
="day", 
sh¨e£rõs
=["20d"], 
Ÿhî£rõs
=["20d", "120d"])

	@E:\Program\python\PythonFinance\FinanceDataMining\FinanceDataMining.py

	@E:\Program\python\PythonFinance\FinanceDataMining\ta-lib_Pattern.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-06 23:05:12

5 #La° 
Ch™ge
: 2017-10-11 12:32:45

6 #Fûê
Name
: 
ad≠tive_ma_1
.
py


7 #Ëøô‰∏™ÊòØËøêÁî®
Ta
-
lib
‰∏≠ÁöÑÊ®°ÂºèËØÜÂà´Êù•Âà§Êñ≠„ÄÇ

9 
imp‹t
 
sys


10 
	gsys
.
	g∑th
.
≠≥nd
("../FinanceDataSource")

11 
imp‹t
 
Fö™˚D©aSour˚


12 
imp‹t
 
numpy
 
as
 
≈


13 
imp‹t
 
èlib


16 
def
 
	$gë_t⁄ghuashun_AGUSDO_d©a
():

18  
Fö™˚D©aSour˚
.
	$gë_t⁄ghuashun_d©a
(
Fö™˚D©aSour˚
.
t⁄ghuashun_AGUSDO
)

21 
def
 
	$∑âîn
(
cdl_fun
, 
d©a
):

23 
	`¥öt
("Ê®°ÂºèÔºö%s" % (
cdl_fun
))

24 
›í_d©a
 = 
d©a
['O≥n'].
	$as_m©rix
()

25 
high_d©a
 = 
d©a
['High'].
	$as_m©rix
()

26 
low_d©a
 = 
d©a
['Low'].
	$as_m©rix
()

27 
˛o£_d©a
 = 
d©a
['Clo£'].
	$as_m©rix
()

29 
cdl
 = 
	`evÆ
(
cdl_fun
 + "(open_data, high_data,Üow_data, close_data)")

30 
boﬁ_cdl
 = 
cdl
 == 100

32 
boﬁ_cdl
 = 
≈
.
	$ö£π
(
boﬁ_cdl
, 0, 
FÆ£
)

34 
boﬁ_cdl
 = boﬁ_cdl[:
	`Àn
(bool_cdl) - 1]

36 
	$¥öt
(
d©a
[
boﬁ_cdl
].
ödex
)

37 
diff_˛o£_›í
 = (
˛o£_d©a
 - 
›í_d©a
)[
boﬁ_cdl
]

38 
	$summ¨y
(
diff_˛o£_›í
)

39 
	`¥öt
("*********************************************************")

41 
∑ss


44 
def
 
	$summ¨y
(
_l°
):

46 if(
	`Àn
(
_l°
) == 0):

48 
	$summ¨y2
(
_l°
)

49 
¨r_ãmp
 = 
≈
.
	$¨øy
(
_l°
)

50 
	`¥öt
("up")

51 
¨r_up
 = 
¨r_ãmp
[arr_temp > 0]

52 
	$summ¨y2
(
¨r_up
)

53 
	`¥öt
("down")

54 
¨r_down
 = 
¨r_ãmp
[arr_temp < 0]

55 
	$summ¨y2
(
¨r_down
)

58 
def
 
	$summ¨y2
(
¨r
):

59 if(
	`Àn
(
¨r
) == 0):

61 
	`¥öt
("À¿%d" % 
	$Àn
(
¨r
))

62 
	`¥öt
("ÊúÄÂ∞èÔºö%f" % 
≈
.
	$mö
(
¨r
))

63 
	`¥öt
("ÂùáÂÄºÔºö%f" % 
≈
.
	$món
(
¨r
))

64 
	`¥öt
("‰∏≠‰ΩçÊï∞Ôºö%f" % 
≈
.
	$medün
(
¨r
))

65 
	`¥öt
("ÊúÄÂ§ßÂÄºÔºö%f" % 
≈
.
	$max
(
¨r
))

68 
__«me__
 == "__main__":

69 
sûvî_d©a
 = 
	$gë_t⁄ghuashun_AGUSDO_d©a
()

70 #Áî®
dú
Êù•ÂèñÂæóÊâÄÊúâÁöÑÂ±ûÊÄßÊñπÊ≥ï

71 
i
 
ö
 
	$dú
(
èlib
):

72 #Âà§Êñ≠ÂºÄÂßãÊòØ‰∏çÊòØ‚Äú
CDL
‚Äù

73 if(
i
[:3] == "CDL"):

74 
s
 = "èlib." + 
i


75 
	$∑âîn
(
s
, 
sûvî_d©a
)

76 #∑âîn(
èlib
.
CDL2CROWS
, 
sûvî_d©a
)

	@E:\Program\python\PythonFinance\FinanceDataSource\FinanceDataSource.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-09-03 11:23:33

5 #La° 
Ch™ge
: 2017-10-01 14:58:36

6 #Fûê
Name
: 
öô_d©a
.
py


9 Ëøô‰∏™Êñá‰ª∂ÊòØÁî®Êù•ÂàùÂßãÂåñÈáëËûçÊï∞ÊçÆÁöÑÔºåÊöÇÊó∂ÊòØ‰ªé
	gqu™dl
‰∏≠ÂèñÂæóÊï∞ÊçÆ

13 
imp‹t
 
qu™dl


14 
‰om
 
∑ndas_d©¨ódî
 
imp‹t
 
d©a
 
as
 
web


15 
imp‹t
 
time


16 
imp‹t
 
d©ëime


17 
imp‹t
 
∑ndas


18 
imp‹t
 
os


19 
imp‹t
 
ch¨dë


20 
imp‹t
 
numpy
 
as
 
	g≈


25 
	g°r_qu™dl
 = "quandl"

26 
qu™dl_lbma_gﬁd
 = "LBMA/GOLD"

27 
qu™dl_lbma_sûvî
 = "LBMA/SILVER"

28 
qu™dl_„d_jrxwtfb_n_b
 = "FED/JRXWTFB_N_B"

29 
dow∆ﬂd_qu™dl
 = [
qu™dl_lbma_gﬁd
,

30 
qu™dl_lbma_sûvî
,

31 
qu™dl_„d_jrxwtfb_n_b
]

34 
	g°r_∑ndas_d©¨ódî
 = "yahoo"

35 
yahoo_gﬁd
 = "GC=F" #ÈõÖËôéË¥¢Áªè‰∏äÁöÑÈªÑÈáëÊúüË¥ß

36 
yahoo_sûvî
 = "SI=F" #ÁôΩÈì∂ÊúüË¥ß

37 
yaoo_¸ude_oû
 = "CL=F" #ÂéüÊ≤πÊúüË¥ß

38 
yahoo_s_p_500
 = "^GSPC" #Ê†áÊôÆ500

39 
yahoo_dow_30
 = "^DJI" #ÈÅìÁêºÊñØ

40 
yahoo_«sdaq
 = "^IXIC" #Á∫≥ÊñØËææÂÖã

42 
dow∆ﬂd_yahoo
 = [
yahoo_gﬁd
,

43 
yahoo_sûvî
,

44 
yaoo_¸ude_oû
,

45 
yahoo_s_p_500
,

46 
yahoo_dow_30
,

47 
yahoo_«sdaq
]

51 
	g°r_t⁄ghuashun
 = "ÂêåËä±È°∫"

52 
t⁄ghuashun_AGUSDO
 = "AGUSDO" #‰º¶Êï¶Èì∂

53 
t⁄ghuashun_AUUSDO
 = "AUUSDO" #‰º¶Êï¶Èáë

54 
t⁄ghuashun_USDIND
 = "USDIND" #ÁæéÂÖÉÊåáÊï∞

55 
t⁄ghuashun_AGTD
 = "AGTD" #‰∏äÊµ∑ÈªÑÈáë‰∫§ÊòìÊâÄÁöÑÁôΩÈì∂
TD


56 
t⁄ghuashun_AUTD
 = "AUTD" #‰∏äÊµ∑ÈªÑÈáë‰∫§ÊòìÊâÄÁöÑÈªÑÈáë
TD


58 
t⁄ghuashun_di˘_cﬁumns
 = {

74 
def
 
gë_csv_fûe_«me
(
d©a_suµlõr
, 
symbﬁ
, 
ext
='csv'):

76 ËæìÂÖ•Êï∞ÊçÆÊèê‰æõËÄÖÂíåÁ¨¶Âè∑ÔºåÂèñÂæó
CSV
Êñá‰ª∂ÂêçÁöÑ

79 
code
 = 
symbﬁ
.
ª∂a˚
("/", "_")

80 
	gcsv_fûe_«me
 = "".
joö
(["d©a/", 
d©a_suµlõr
, "_", 
code
, ".", 
ext
])

81 
	gthis_fûe_∑th
 = 
os
.
∑th
.
	$ab•©h
(
__fûe__
) #Ëøô‰∏™ÊñπÂºèÂèØ‰ª•ÂæóÂà∞Ëøô‰∏™Êñá‰ª∂ÁöÑÁªùÂØπË∑ØÂæÑ

82 
this_fûe_dú
 = 
os
.
∑th
.
	$dú«me
(
this_fûe_∑th
) #ÂèñÂæóËøô‰∏™Êñá‰ª∂ÊâÄÂú®ÁöÑÁõÆÂΩï

84  
os
.
∑th
.
	$joö
(
this_fûe_dú
, 
csv_fûe_«me
)

87 
def
 
	$gë_d©a
(
d©a_suµlõr
, 
symbﬁ
):

90 i‡(
d©a_suµlõr
 =
°r_t⁄ghuashun
):

91  
	$gë_t⁄ghuashun_d©a
(
symbﬁ
)

92  
∑ndas
.
	`ªad_csv
(
	`gë_csv_fûe_«me
(
d©a_suµlõr
, 
symbﬁ
), 
∑r£_d©es
=
True
, 
ödex_cﬁ
="Date")

95 
def
 
	$yahoo_dow∆ﬂd_d©a
(
°ock_«me
):

96 
°¨t
 = 
d©ëime
.
	$d©ëime
(2000, 1, 1)

97 
íd
 = 
d©ëime
.
d©e
.
	$today
()

98 
d©a
 = 
web
.
	`D©aRódî
(
°ock_«me
, "yahoo", 
°¨t
, 
íd
)

99 
	`¥öt
("‰∏ãËΩΩ {0}ÔºåÊï∞ÊçÆÈáèÔºö{1}".
	`f‹m©
(
°ock_«me
, 
	$Àn
(
d©a
)))

100 
csv_fûe_«me
 = 
	$gë_csv_fûe_«me
(
°r_∑ndas_d©¨ódî
, 
°ock_«me
)

101 
d©a
.
	$to_csv
(
csv_fûe_«me
)

104 
def
 
	$qu™dl_dow∆ﬂd_d©a
(
°ock_«me
):

106 ‰ªé
qu™dl
‰∏ãËΩΩÈáëËûçÊï∞ÊçÆÁöÑ

107 
Args
 :

108 
°ock_«me
 : ÈáëËûçÂìÅÁßç

109 
csv_fûe_«me
 : Ë¶Å‰øùÂ≠òÂà∞ÁöÑ
CSV
Êñá‰ª∂

111 #ÂæóÊúâ
key
Âïä

112 
qu™dl
.
ApiC⁄fig
.
≠i_key
 = "TX__sAMFHm3ckYYyEHu7"

113 #ÈªòËÆ§‰∏ãËΩΩÁöÑÂ∞±ÊòØ
∑ndas


114 
d©a
 = 
qu™dl
.
	$gë
(
°ock_«me
)

115 
	`¥öt
("‰∏ãËΩΩ {0}ÔºåÊï∞ÊçÆÈáèÔºö{1}".
	`f‹m©
(
°ock_«me
, 
	$Àn
(
d©a
)))

116 
csv_fûe_«me
 = 
	$gë_csv_fûe_«me
(
°r_qu™dl
, 
°ock_«me
)

117 
d©a
.
	$to_csv
(
csv_fûe_«me
)

120 
def
 
	$gë_t⁄ghuashun_d©a
(
symbﬁ
):

123 
∑th
 = 
	`gë_csv_fûe_«me
(
°r_t⁄ghuashun
, 
symbﬁ
, "xls")

125 
øwd©a
 = 
	`›í
(
∑th
, "rb").
	$ªad
()

126 
ªsu…
 = 
ch¨dë
.
	$dëe˘
(
øwd©a
)

127 
ch¨íc
 = 
ªsu…
['encoding']

129 
f
 = 
	$›í
(
∑th
, 
ícodög
=
ch¨íc
)

131 #ËøôÈáåËøòÂæóÂØπÊó∂Èó¥ËøõË°åËΩ¨Êç¢ÔºåÂõ†‰∏∫
mëÆŸlib
‰∏çËÆ§Ëøô‰∏™Êó∂Èó¥Ê†ºÂºèÂïä„ÄÇ

132 
d©a
 = 
∑ndas
.
	`ªad_csv
(
f
, 
£p
='\t', 
∑r£_d©es
=["Êó∂Èó¥"], 
ödex_cﬁ
="Êó∂Èó¥", 
d©e_∑r£r
=
°r·ime
,
thoußnds
=',', 
dty≥
={

133 "ÂºÄÁõò":
≈
.
Êﬂt64
,

134 "ÊúÄÈ´ò":
≈
.
Êﬂt64
,

135 "ÊúÄ‰Ωé":
≈
.
Êﬂt64
,

136 "Êî∂Áõò":
≈
.
Êﬂt64


139 
	}
})

141 
d©a
.
	$ª«me
(
cﬁumns
=
t⁄ghuashun_di˘_cﬁumns
, 
ö∂a˚
=
True
)

142  
d©a


145 
def
 
	$°r·ime
(
x
):

146  
d©ëime
.d©ëime.
	`°Ωtime
(
	`°r
(
x
).
	`•lô
(',')[0], "%Y-%m-%d")

149 
def
 
	$öô_d©a
():

150 
symbﬁ
 
ö
 
dow∆ﬂd_qu™dl
:

151 
	$qu™dl_dow∆ﬂd_d©a
(
symbﬁ
)

153 
is_dow∆ﬂd_ok
 = 
FÆ£
 #ÊòØÂê¶‰∏ãËΩΩ‰∫Ü

154 
symbﬁ
 
ö
 
dow∆ﬂd_yahoo
:

155 
fõld_cou¡
 = 0 #Â§±Ë¥•Ê¨°Êï∞

156 
is_dow∆ﬂd_ok
 = 
FÆ£


157 
is_dow∆ﬂd_ok
 
is
 
FÆ£
 
™d
 
fõld_cou¡
 < 5): #ÊúÄÂ§öÂÖÅËÆ∏5Ê¨°ÈîôËØØÂêß

158 
åy
:

159 
	$yahoo_dow∆ﬂd_d©a
(
symbﬁ
)

160 
is_dow∆ﬂd_ok
 = 
True


161 
ex˚±
 
Ex˚±i⁄
 
as
 
îr
:

162 
	$¥öt
(
îr
)

163 
	`¥öt
("‰∏ãËΩΩÂ§±Ë¥•Ôºö" + 
symbﬁ
)

164 
fõld_cou¡
 = field_count + 1

165 
	`¥öt
("Â§±Ë¥•Ê¨°Êï∞Ôºö" + 
	$°r
(
fõld_cou¡
))

166 
	`¥öt
("ÊöÇÂÅú3ÁßíÈíü")

167 
time
.
	$¶ìp
(3)

169 
__«me__
 == "__main__":

170 
	`öô_d©a
()

	@E:\Program\python\PythonFinance\FinanceDataSource\__init__.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
 : 2017-11-07 20:32:08

5 #Time-
°amp
: <2017-11-07 20:33:17 
kîwö
>

6 #Fûê
Name
 : 
__öô__
.
py


7 #C›yrighà(
c
) 2017

11 
	g‰om
 . 
imp‹t
 
	gFö™˚D©aSour˚


	@E:\Program\python\PythonFinance\PythonFinance\PythonFinance.py

	@E:\Program\python\PythonFinance\a.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄


2 #-*- 
codög
: 
utf
-8 -*-

3 #Auth‹: 
kîwö
.
˙
@
gmaû
.
com


4 #Cª©ed 
Time
:2017-11-08 13:16:37

5 #La° 
Ch™ge
: 2017-11-08 13:16:42

6 #Fûê
Name
: 
a
.
py


	@
1
.
1
/usr/include
18
1103
E:\Program\python\PythonFinance\.ropeproject\config.py
E:\Program\python\PythonFinance\BackTrader\.ropeproject\config.py
E:\Program\python\PythonFinance\BackTrader\BackTrader.py
E:\Program\python\PythonFinance\BackTrader\Strategy_KAMA_1.py
E:\Program\python\PythonFinance\BackTrader\Strategy_KAMA_2.py
E:\Program\python\PythonFinance\BackTrader\Strategy_MACD_1.py
E:\Program\python\PythonFinance\BackTrader\Strategy_MA_1.py
E:\Program\python\PythonFinance\BackTrader\Strategy_MA_2.py
E:\Program\python\PythonFinance\BackTrader\Strategy_MA_3.py
E:\Program\python\PythonFinance\BackTrader\Strategy_MA_4.py
E:\Program\python\PythonFinance\BackTrader\Strategy_main.py
E:\Program\python\PythonFinance\CandlestickOhlc\CandlestickOhlc.py
E:\Program\python\PythonFinance\FinanceDataMining\FinanceDataMining.py
E:\Program\python\PythonFinance\FinanceDataMining\ta-lib_Pattern.py
E:\Program\python\PythonFinance\FinanceDataSource\FinanceDataSource.py
E:\Program\python\PythonFinance\FinanceDataSource\__init__.py
E:\Program\python\PythonFinance\PythonFinance\PythonFinance.py
E:\Program\python\PythonFinance\a.py
